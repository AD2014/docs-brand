# Product

Product is the father class from where many animaes can be created.

All the new animaes will be generated with the same header data (title, picture, category) and will receive
the notes from the product itself. Header data will be owned by the user on the contrary brand's notes will be
always owned by the brand.



### The Product object

Parameter   | Type     | Description
---------   | ----     | -----------
name        | String   | the product name
vendorId    | ObjectId | the brand id
anima       | Object   | the anima skeleton
memos       | [Array of Notes] | List of "Brand notes"
ean13       | String   | The [EAN13](https://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29) code. Autogenerated by default, can be overriden with a valid GDO's EAN code
ean13status | Boolean  | the acquisition status for ean13
l10n        | String   | the locale
createdAt   | Date     | creation date
modifiedAt  | Date     | last update date



## /v1/brand/:vendorId/product

```shell
##########################################################
################## CREATE A NEW PRODUCT ##################
curl -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X POST https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product --data '{ "product": { "name": "test", "anima": { "title": "just a test"} } }'

## Successful JSON reply:
## {
##     "product":{
##         "__v":0,
##         "modifiedAt":"2015-05-20T08:26:53.273Z",
##         "vendorId":"555c3bfca0dc5b96c3b7acb2",
##         "createdAt":"2015-05-20T08:26:53.272Z",
##         "name":"test",
##         "anima":{
##             "title":"just a test"
##         },
##         "_id":"555c454d2271465e5cc7e6e4"
##     }
## }




##########################################################
################## LIST VENDOR PRODUCTS ##################
curl -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X GET https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product

## Successful JSON reply:
## {
##     "data":[
##     {
##         "_id":"555c454d2271465e5cc7e6e4",
##         "modifiedAt":"2015-05-20T08:26:53.273Z",
##         "createdAt":"2015-05-20T08:26:53.272Z",
##         "name":"test",
##         "anima":{
##             "title":"just a test"
##             }
##     },
##     {
##             "_id":"555c45772271465e5cc7e6e5",
##             "modifiedAt":"2015-05-20T08:27:35.883Z",
##             "createdAt":"2015-05-20T08:27:35.883Z",
##             "name":"test2",
##             "anima":{
##                 "title":"just 2a test"
##             }
##         }
##     ],
##     "total":2,
##     "page":1,
##     "per_page":50
## }
```

This endpoint represent products resource for the brand **vendorId**. Methods allowed are POST for create a new product and GET to list all product of the vendor.

### HTTP METHODS

`POST /v1/brand/:vendorId/product`

Create a new product

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId  |  ObjectId |  yes |  the id of the vendor
product   |Object  | yes | the [product object](http://docs.brand.let.life/)
withSample|boolean | no | flag for pushing sample notes in the product (default: false)
per_page|number|no|The maximum number of records in the data array. If omitted it use config.pagination.per_page

`GET /v1/brand/:vendorId/product`

Get the full list of products of the vendor

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
search |  string|  no|  if present result is filtered over `search` field (case-insensitive)
sorting |  string|  no|  if present result is sorted over `sorting` field (must match a product's field)
categoryId |  integer |  no|  if present result is filtered over `anima.categoryId` field
groupId |  ObjectId |  no|  if present result is filtered over `groupId` field
page|number|no|The page you request to the server. If omitted page 1 is requested
per_page|number|no|The maximum number of records in the data array. If omitted it use config.pagination.per_page









## /v1/brand/:vendorId/product/:productId

```shell
############################################################
################## READ A PRODUCTS DETAIL ##################
curl -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X GET https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product/555c45772271465e5cc7e6e5

## Successful JSON reply:
## {
##     "product":{
##         "_id":"555c45772271465e5cc7e6e5",
##         "modifiedAt":"2015-05-20T08:27:35.883Z",
##         "vendorId":"555c3bfca0dc5b96c3b7acb2",
##         "createdAt":"2015-05-20T08:27:35.883Z",
##         "name":"test2",
##         "anima":{
##             "title":"just 2a test"
##         },
##         "__v":0
##     }
## }





#####################################################
################# UPDATE A PRODUCTS #################
curl -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X PUT https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product/555c45772271465e5cc7e6e5 --data '{ "product": { "name":"tested", "anima": {"title":"name of the anima", "photo": "pop.jpg"}}}'

## Successful JSON reply:
## {
##     "product":{
##         "_id":"555c45772271465e5cc7e6e5",
##         "modifiedAt":"2015-05-20T12:22:06.115Z",
##         "vendorId":"555c3bfca0dc5b96c3b7acb2",
##         "createdAt":"2015-05-20T08:27:35.883Z",
##         "name":"tested",
##         "anima":{
##             "photo":"pop.jpg",
##             "title":"name of the anima"
##         },
##         "__v":0
##     }
## }



#####################################################
################# DELETE A PRODUCTS #################
curl -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X DELETE https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product/555c45772271465e5cc7e6e5

## Successful reply StatusCode 204 - no content
```

This endpoint represent the **productId** product resource owned by vendor **vendorId**. Methods allowed are for read (GET) a single product, modify (PUT) or delete (DEL).


### HTTP METHODS

`GET /v1/brand/:vendorId/product/:productId`

Read a product

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId |  ObjectId |  yes |  the id of the vendor
productId |ObjectId | yes | the id of the  product

`PUT /v1/brand/:vendorId/product/:productId`

Update a product

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId |  ObjectId |  yes |  the id of the vendor
productId |ObjectId | yes | the id of the  product
product |Object | yes | the [product object](#products)

`DELETE /v1/brand/:vendorId/product/:productId`

Delete a product

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId |  ObjectId |  yes |  the id of the vendor
productId |ObjectId | yes | the id of the  product



























## /v1/brand/:vendorId/product/:productId/ean13

```shell

#############################################################
################## CHANGE PRODUCT'S EAN13  ##################
curl -k -H "Content-Type: application/json" -H "Authorization: Bearer v9u535tc38va0iaibuux8ymdeock1wowcu7962gw" -X PUT https://api.let.life/v1/brand/56af2be4c8cd9f460ab0316a/product/5825f96d86a6a88c0f939073/ean13 -d '{"ean13": "pippuzzomio"}'

## On Success ``
##  {
##   "message":"eans updated"
##   "total":3
##  }

```

This endpoint let you change the EAN13 for the **productId** product and the other l10ns products related.



### HTTP Request

`PUT /v1/brand/:vendorId/product/:productId/ean13`

**Auth**: *Basic-Auth* + *brand.manager* permission

**Content-Type**: *application/json*

#### PUT Parameters

Parameter | Type     | Required | Description
--------- | -------- | -------- | -----------
vendorId  | ObjectId |  yes |  the id of the vendor
productId | ObjectId | yes | the id of the  product
ean13     | string   | yes | the new ean13 string


### PUT Response Code

| Code | Data    | Description
| ---- | ------- | -------
|200   | [ { "message": String, "total": Number} ] | PUT Reply, `message` is a human readable string, `total` is the total products affected.
|401   | Unauthorized | Token missing/expired/invalid etc.






































## /v1/brand/:vendorId/product/:productId/l10n



```shell

##################################################################
################# CREATE a NEW l10n OF A PRODUCT #################
curl -v -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X POST "https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product/57a2f6ed91daefc82813ac87/l10n" -d '{"l10n":"en", "forkAnima":true, "forkSplash":true, "forkMemos": true}'

## HTTP/1.1 201 Created
## {
##     "product": {
##       "__v": 0,
##       "modifiedAt": "2016-08-04T08:09:30.564Z",
##      "createdAt": "2016-08-04T08:09:30.562Z",
##      "anima": {
##        "title": "Dollari per Tutti",
##        "categoryId": "11",
##        "photo": "1470297833905_55840f9ebd6127f1785c2e29.jpg"
##      },
##      "vendorId": "555c3bfca0dc5b96c3b7acb2",
##      "name": "SIAMO TUTTI ITALIANI",
##      "_id": "57a2f83a91daefc82813ac8d",
##      "ean13status": true,
##      "ean13": "ltelsiamo0012",
##      "l10nOrigin": "57a2f6ed91daefc82813ac87",
##       "l10nDefault": false,
##       "l10n": "en",
##      "memos": [
##        {
##          //dump
##        },
##         {
##           //dump
##        }
##      ],
##       "successScreenBackground": null,
##       "successScreen": null
##   }
## }



############################################################
################# LIST l10n FOR A PRODUCT #################
curl -v -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X GET "https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product/57a2f6ed91daefc82813ac87/l10n"


## HTTP/1.1 200 OK
## {
##   "l10nDefault": "it",
##   "l10n": [
##     {
##       "l10n": "it",
##       "id": "57a2f6ed91daefc82813ac87"
##     },
##     {
##       "l10n": "en",
##       "id": "57a2f83a91daefc82813ac8d"
##     }
##   ]
## }
##
```

List all l10n's version of a product and create a new one.

### HTTP METHODS

`GET /v1/brand/:vendorId/product/:productId/l10n`

`POST /v1/brand/:vendorId/product/:productId/l10n`

**Auth**: *Token* + *brand.manager* permission

**Content-Type**: *application/json*

### GET PARAMETERS

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId |  ObjectId |  yes |  the id of the vendor
productId |ObjectId | yes | the id of the  product

### GET RESPONSE


| Code | Data    | Description
| ---- | ------- | -------
|200   |  	{ "l10nDefault": string, "l10n" : [ { "l10n": string, "id": string } ] }  | `l10nDefault` is the default language, `l10n` is an array where each object is `l10n` the language code, `id` the product id
|401   | Unauthorized | Token missing/expired/invalid etc.


### POST PARAMETERS

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId |  ObjectId |  yes |  the id of the vendor
productId |ObjectId | yes | the id of the  product
l10n |string | yes | the language code
forkAnima |boolean | no | if true clone the anima (default: false)
forkMemos |boolean | no | if true clone the memos (default: false)
forkSplash |boolean | no | if true clone the splashScreen (default: false)

### POST RESPONSE


| Code | Data    | Description
| ---- | ------- | -------
|201   |  	{ "product": Object }  | the product created
|401   | Unauthorized | Token missing/expired/invalid etc.




























## /v1/brand/:vendorId/product/:productId/l10nDefault



```shell

##################################################################
################# CREATE a NEW l10n OF A PRODUCT #################
curl -v -k -H "Content-Type: application/json" -H "Authorization: Bearer w34938e4k1lg7yb5thomtwjkddd5n9nd1mmhlpcc" -X PUT "https://api.let.life/v1/brand/555c3bfca0dc5b96c3b7acb2/product/57a2f83a91daefc82813ac8d/l10nDefault"


## HTTP/1.1 200 OK
## {
##    "message":"l10n default set"
## }
```

Set the product as default l10n.

### HTTP METHODS

`PUT /v1/brand/:vendorId/product/:productId/l10nDefault`


**Auth**: *Token* + *brand.manager* permission

**Content-Type**: *application/json*

### PUT PARAMETERS

Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
vendorId |  ObjectId |  yes |  the id of the vendor
productId |ObjectId | yes | the id of the  product

### PUT RESPONSE


| Code | Data    | Description
| ---- | ------- | -------
|200   |  	{ "message": string}  |
|401   | Unauthorized | Token missing/expired/invalid etc.
